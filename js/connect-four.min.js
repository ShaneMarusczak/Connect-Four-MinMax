var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,k,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[k]=d.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var k=0;return $jscomp.iteratorPrototype(function(){return k<b.length?{done:!1,value:b[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var k=b[Symbol.iterator];return k?k.call(b):$jscomp.arrayIterator(b)};
$jscomp.polyfill=function(b,k,d,n){if(k){d=$jscomp.global;b=b.split(".");for(n=0;n<b.length-1;n++){var p=b[n];p in d||(d[p]={});d=d[p]}b=b[b.length-1];n=d[b];k=k(n);k!=n&&null!=k&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:k})}};
$jscomp.polyfill("Array.from",function(b){return b?b:function(b,d,n){$jscomp.initSymbolIterator();d=null!=d?d:function(b){return b};var k=[],m=b[Symbol.iterator];if("function"==typeof m)for(b=m.call(b);!(m=b.next()).done;)k.push(d.call(n,m.value));else for(var m=b.length,g=0;g<m;g++)k.push(d.call(n,b[g]));return k}},"es6-impl","es3");$jscomp.findInternal=function(b,k,d){b instanceof String&&(b=String(b));for(var n=b.length,p=0;p<n;p++){var m=b[p];if(k.call(d,m,p,b))return{i:p,v:m}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,d){return $jscomp.findInternal(this,b,d).v}},"es6-impl","es3");
(function(){function b(a){if(!d&&!n){a=Number(a.target.id.substring(3));document.getElementById("fc"+a).classList.add("bounce");for(var c=5;0<=c;c--)if(document.getElementById("td"+c+a).classList.contains("empty")){document.getElementById("td"+c+a).classList.add("glow");break}}}function k(a){a=Number(a.target.id.substring(3));document.getElementById("fc"+a).classList.remove("bounce");for(var c=5;0<=c;c--)if(document.getElementById("td"+c+a).classList.contains("empty")){document.getElementById("td"+
c+a).classList.remove("glow");break}}var d=!1,n=!1,p=[],m=function(a,c,b){this.game=a;this.fieldOfPlay=c;this.player=b};m.prototype.isFinished=function(a,c){return 0==a||c==this.game.score||c==-this.game.score||this.isFull()?!0:!1};m.prototype.canPlace=function(a){if(null===this.fieldOfPlay[0][a]&&0<=a&&a<this.game.columns){for(var c=this.game.rows-1;0<=c;c--)if(null===this.fieldOfPlay[c][a]){this.fieldOfPlay[c][a]=this.player;break}this.player=g.switchRound(this.player);return!0}return!1};m.prototype.scoreBoard=
function(a,c,b,e){var f=0,l=0;this.game.winningArrayHuman=[];this.game.winningArrayCpu=[];for(var h=0;4>h;h++)0==this.fieldOfPlay[a][c]?(this.game.winningArrayHuman.push([a,c]),f++):1==this.fieldOfPlay[a][c]&&(this.game.winningArrayCpu.push([a,c]),l++),a+=b,c+=e;return 4==f?(this.game.winners=this.game.winningArrayHuman,-this.game.score):4==l?(this.game.winners=this.game.winningArrayCpu,this.game.score):l};m.prototype.evaluateScore=function(){for(var a=0,c=0,b=0,e=0,f=0;f<this.game.rows-3;f++)for(var l=
0;l<this.game.columns;l++){var h=this.scoreBoard(f,l,1,0);if(h==this.game.score)return this.game.score;if(h==-this.game.score)return-this.game.score;a+=h}for(f=0;f<this.game.rows;f++)for(l=0;l<this.game.columns-3;l++){h=this.scoreBoard(f,l,0,1);if(h==this.game.score)return this.game.score;if(h==-this.game.score)return-this.game.score;c+=h}for(f=0;f<this.game.rows-3;f++)for(l=0;l<this.game.columns-3;l++){h=this.scoreBoard(f,l,1,1);if(h==this.game.score)return this.game.score;if(h==-this.game.score)return-this.game.score;
b+=h}for(f=3;f<this.game.rows;f++)for(l=0;l<=this.game.columns-4;l++){h=this.scoreBoard(f,l,-1,1);if(h==this.game.score)return this.game.score;if(h==-this.game.score)return-this.game.score;e+=h}return c+a+b+e};m.prototype.isFull=function(){for(var a=0;a<this.game.columns;a++)if(null===this.fieldOfPlay[0][a])return!1;return!0};m.prototype.getBoardCopy=function(){for(var a=[],c=0;c<this.fieldOfPlay.length;c++)a.push(this.fieldOfPlay[c].slice());return new m(this.game,a,this.player)};var g=function(a){this.rows=
6;this.columns=7;this.depth=a;this.score=1E5;this.round=0;this.winners=[];this.turnsTaken=0;this.init()};g.prototype.init=function(){for(var a=this,c=Array(6),d=0;d<c.length;d++){c[d]=Array(7);for(var e=0;e<c[d].length;e++)c[d][e]=null}this.board=new m(this,c,0);Array.from(document.getElementById("gameBoard").getElementsByTagName("td")).forEach(function(c){c.addEventListener("click",function(c){a.move(c)},!1);c.addEventListener("mouseover",b);c.addEventListener("mouseleave",k)})};g.prototype.move=
function(a){var c=this;d||(this.turnsTaken++,document.getElementById("uiBlocker").classList.add("block"),a=a.target||window.event.srcElement,0==this.round&&this.playCoin(a.cellIndex),document.getElementById("fc"+a.cellIndex).classList.remove("bounce"),window.sleep(800).then(function(){1==c.round&&c.generateComputerDecision()}))};g.animateDrop=function(a){a=void 0===a?{}:a;var c=a.inputRow,b=a.inputCol,e=a.moveTurn,f=void 0===a.currentRow?0:a.currentRow;f===c?(d||e||(window.sleep(75).then(function(){window.modalOpen("Thinking...")}),
document.getElementsByTagName("html")[0].classList.add("progressCursor")),e&&(document.getElementById("uiBlocker").classList.remove("block"),n=!1),document.getElementById("td"+f+b).className=e?"coin cpu-coin":"coin human-coin"):(n=!0,document.getElementById("td"+f+b).classList.add("coin"),document.getElementById("td"+f+b).classList.add(e?"cpu-coin":"human-coin"),window.sleep(100).then(function(){document.getElementById("td"+f+b).classList.remove("coin");document.getElementById("td"+f+b).classList.remove(e?
"cpu-coin":"human-coin")}),window.sleep(100).then(function(){g.animateDrop({currentRow:f+1,inputCol:b,inputRow:c,moveTurn:e})}))};g.prototype.playCoin=function(a){if(!d){for(var c=this.rows-1;0<=c;c--)if(document.getElementById("gameBoard").rows[c].cells[a].classList.contains("empty")){1==this.round?g.animateDrop({inputCol:a,inputRow:c,moveTurn:!0}):g.animateDrop({inputCol:a,inputRow:c,moveTurn:!1});break}if(!this.board.canPlace(a))return document.getElementById("uiBlocker").classList.remove("block"),
alert("Invalid move!");this.round=g.switchRound(this.round);this.checkGameOver()}return null};g.prototype.playerHasWin=function(){for(var a=!1,c=-1E7,b=-1,e=$jscomp.makeIterator(p),f=e.next();!f.done;f=e.next())if(f.value[1]===-this.score){a=!0;break}if(a)for(a=$jscomp.makeIterator(p),f=a.next();!f.done;f=a.next())f=f.value,f[1]>c&&(c=f[1],b=p.indexOf(f));return b};g.prototype.generateComputerDecision=function(){var a=this;if(!d){p=[];this.maximize(this.board,2,!0);var b=this.playerHasWin(),g=-1!==
b?b:this.maximize(this.board,this.getDepth(),!1)[0];window.sleep(14/Number(this.depth)*325).then(function(){window.modalClose();window.sleep(100).then(function(){return a.playCoin(g)})})}};g.prototype.getDepth=function(){return 2===this.depth?2:2>this.turnsTaken?4:5>this.turnsTaken?6:this.depth};g.prototype.maximize=function(a,b,d,e,f){var c=a.evaluateScore();if(a.isFinished(b,c))return[null,c];for(var c=[null,-99999],h=0;h<this.columns;h++){var g=a.getBoardCopy();if(g.canPlace(h)){g=this.minimize(g,
b-1,e,f);if(null===c[0]||g[1]>c[1])c[0]=h,e=$jscomp.makeIterator(g),e.next(),c[1]=e.next().value,e=$jscomp.makeIterator(g),e.next(),e=e.next().value;d&&p.push(g);if(e>=f)break}}return c};g.prototype.minimize=function(a,b,d,e){var c=a.evaluateScore();if(a.isFinished(b,c))return[null,c];for(var c=[null,99999],g=0;g<this.columns;g++){var h=a.getBoardCopy();if(h.canPlace(g)){h=this.maximize(h,b-1,!1,d,e);if(null===c[0]||h[1]<c[1])c[0]=g,e=$jscomp.makeIterator(h),e.next(),c[1]=e.next().value,e=$jscomp.makeIterator(h),
e.next(),e=e.next().value;if(d>=e)break}}return c};g.switchRound=function(a){return 0==a?1:0};g.prototype.checkGameOver=function(){var a=this.board.evaluateScore();a==-this.score?this.gameOverHelper("You Win!"):a==this.score?this.gameOverHelper("You Lose!"):this.board.isFull()&&(d=!0,window.modal("Draw!",2E3));document.getElementsByTagName("html")[0].classList.remove("progressCursor")};g.prototype.gameOverHelper=function(a){var b=this;document.getElementById("uiBlocker").classList.remove("block");
d=!0;window.modal(a,2E3);window.sleep(1E3).then(function(){b.winnersColorChange()})};g.prototype.winnersColorChange=function(){document.getElementById("gameBoard").className="finished";for(var a=0;a<this.winners.length;a++){var b=document.getElementById("gameBoard").rows[this.winners[a][0]].cells[this.winners[a][1]].className;document.getElementById("gameBoard").rows[this.winners[a][0]].cells[this.winners[a][1]].className=b+" win"}};var q=function(){document.getElementById("difficulty").disabled=
!0;window.Game=new g(Array.from(document.getElementById("difficulty").options).find(function(a){return a.selected}).value)};(function(){document.getElementById("start").addEventListener("click",q);for(var a=0;7>a;a++){var b=document.createElement("div");b.id="fc"+a;b.classList.add("floatingCircle");document.getElementById("floatingCircles").appendChild(b)}for(a=0;6>a;a++){b=document.createElement("tr");document.getElementById("gameBoard").appendChild(b);for(var d=0;7>d;d++){var e=document.createElement("td");
e.className="empty";e.id="td"+a+d;b.appendChild(e)}}})()})();
