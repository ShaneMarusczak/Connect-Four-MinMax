var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,k,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[k]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var k=0;return $jscomp.iteratorPrototype(function(){return k<a.length?{done:!1,value:a[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var k=a[Symbol.iterator];return k?k.call(a):$jscomp.arrayIterator(a)};
$jscomp.polyfill=function(a,k,d,m){if(k){d=$jscomp.global;a=a.split(".");for(m=0;m<a.length-1;m++){var l=a[m];l in d||(d[l]={});d=d[l]}a=a[a.length-1];m=d[a];k=k(m);k!=m&&null!=k&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:k})}};
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,d,m){$jscomp.initSymbolIterator();d=null!=d?d:function(b){return b};var l=[],h=a[Symbol.iterator];if("function"==typeof h)for(a=h.call(a);!(h=a.next()).done;)l.push(d.call(m,h.value));else for(var h=a.length,k=0;k<h;k++)l.push(d.call(m,a[k]));return l}},"es6-impl","es3");$jscomp.findInternal=function(a,k,d){a instanceof String&&(a=String(a));for(var m=a.length,l=0;l<m;l++){var h=a[l];if(k.call(d,h,l,a))return{i:l,v:h}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6-impl","es3");
(function(){function a(b){if(!d&&!m){b=Number(b.target.id.substring(3));document.getElementById("fc"+b).classList.add("bounce");for(var c=5;0<=c;c--)if(document.getElementById("td"+c+b).classList.contains("empty")){document.getElementById("td"+c+b).classList.add("glow");break}}}function k(b){b=Number(b.target.id.substring(3));document.getElementById("fc"+b).classList.remove("bounce");for(var c=5;0<=c;c--)if(document.getElementById("td"+c+b).classList.contains("empty")){document.getElementById("td"+
c+b).classList.remove("glow");break}}var d=!1,m=!1,l=function(b,c,a){this.game=b;this.fieldOfPlay=c;this.player=a};l.prototype.isFinished=function(b,c){return 0==b||c==this.game.score||c==-this.game.score||this.isFull()?!0:!1};l.prototype.canPlace=function(b){if(null===this.fieldOfPlay[0][b]&&0<=b&&b<this.game.columns){for(var c=this.game.rows-1;0<=c;c--)if(null===this.fieldOfPlay[c][b]){this.fieldOfPlay[c][b]=this.player;break}this.player=h.switchRound(this.player);return!0}return!1};l.prototype.scoreBoard=
function(b,c,a,f){var e=0,n=0;this.game.winningArrayHuman=[];this.game.winningArrayCpu=[];for(var g=0;4>g;g++)0==this.fieldOfPlay[b][c]?(this.game.winningArrayHuman.push([b,c]),e++):1==this.fieldOfPlay[b][c]&&(this.game.winningArrayCpu.push([b,c]),n++),b+=a,c+=f;return 4==e?(this.game.winners=this.game.winningArrayHuman,-this.game.score):4==n?(this.game.winners=this.game.winningArrayCpu,this.game.score):n};l.prototype.evaluateScore=function(){for(var b=0,c=0,a=0,f=0,e=0;e<this.game.rows-3;e++)for(var d=
0;d<this.game.columns;d++){var g=this.scoreBoard(e,d,1,0);if(g==this.game.score)return this.game.score;if(g==-this.game.score)return-this.game.score;b+=g}for(e=0;e<this.game.rows;e++)for(d=0;d<this.game.columns-3;d++){g=this.scoreBoard(e,d,0,1);if(g==this.game.score)return this.game.score;if(g==-this.game.score)return-this.game.score;c+=g}for(e=0;e<this.game.rows-3;e++)for(d=0;d<this.game.columns-3;d++){g=this.scoreBoard(e,d,1,1);if(g==this.game.score)return this.game.score;if(g==-this.game.score)return-this.game.score;
a+=g}for(e=3;e<this.game.rows;e++)for(d=0;d<=this.game.columns-4;d++){g=this.scoreBoard(e,d,-1,1);if(g==this.game.score)return this.game.score;if(g==-this.game.score)return-this.game.score;f+=g}return c+b+a+f};l.prototype.isFull=function(){for(var b=0;b<this.game.columns;b++)if(null===this.fieldOfPlay[0][b])return!1;return!0};l.prototype.getBoardCopy=function(){for(var b=[],c=0;c<this.fieldOfPlay.length;c++)b.push(this.fieldOfPlay[c].slice());return new l(this.game,b,this.player)};var h=function(b){this.rows=
6;this.columns=7;this.depth=b;this.score=1E5;this.round=0;this.winners=[];this.init()};h.prototype.init=function(){for(var b=this,c=Array(6),d=0;d<c.length;d++){c[d]=Array(7);for(var f=0;f<c[d].length;f++)c[d][f]=null}this.board=new l(this,c,0);Array.from(document.getElementById("gameBoard").getElementsByTagName("td")).forEach(function(c){c.addEventListener("click",function(c){b.move(c)},!1);c.addEventListener("mouseover",a);c.addEventListener("mouseleave",k)})};h.prototype.move=function(b){var c=
this;d||(document.getElementById("uiBlocker").style.display="block",b=b.target||window.event.srcElement,0==this.round&&this.playCoin(b.cellIndex),window.sleep(800).then(function(){1==c.round&&c.generateComputerDecision()}))};h.animateDrop=function(b){b=void 0===b?{}:b;var c=b.inputRow,a=b.inputCol,f=b.moveTurn,e=void 0===b.currentRow?0:b.currentRow;e===c?(d||f||window.sleep(75).then(function(){window.modalOpen("Thinking...")}),!d&&f&&(document.getElementById("uiBlocker").style.display="none",m=!1),
document.getElementById("td"+e+a).className=f?"coin cpu-coin":"coin human-coin"):(m=!0,document.getElementById("td"+e+a).classList.add("coin"),document.getElementById("td"+e+a).classList.add(f?"cpu-coin":"human-coin"),window.sleep(100).then(function(){document.getElementById("td"+e+a).classList.remove("coin");document.getElementById("td"+e+a).classList.remove(f?"cpu-coin":"human-coin")}),window.sleep(100).then(function(){h.animateDrop({currentRow:e+1,inputCol:a,inputRow:c,moveTurn:f})}))};h.prototype.playCoin=
function(b){if(!d){for(var c=this.rows-1;0<=c;c--)if(document.getElementById("gameBoard").rows[c].cells[b].classList.contains("empty")){1==this.round?h.animateDrop({inputCol:b,inputRow:c,moveTurn:!0}):h.animateDrop({inputCol:b,inputRow:c,moveTurn:!1});break}if(!this.board.canPlace(b))return document.getElementById("uiBlocker").style.display="none",alert("Invalid move!");this.round=h.switchRound(this.round);this.checkGameOver()}return null};h.prototype.generateComputerDecision=function(){var b=this;
if(!d){var c=$jscomp.makeIterator(this.maximize(this.board,this.depth)).next().value;window.sleep(14/Number(this.depth)*325).then(function(){window.modalClose();window.sleep(100).then(function(){return b.playCoin(c)})})}};h.prototype.maximize=function(b,c,a,d){var e=b.evaluateScore();if(b.isFinished(c,e))return[null,e];for(var e=[null,-99999],f=0;f<this.columns;f++){var g=b.getBoardCopy();if(g.canPlace(f)){g=this.minimize(g,c-1,a,d);if(null===e[0]||g[1]>e[1])e[0]=f,a=$jscomp.makeIterator(g),a.next(),
e[1]=a.next().value,a=$jscomp.makeIterator(g),a.next(),a=a.next().value;if(a>=d)break}}return e};h.prototype.minimize=function(b,a,d,f){var c=b.evaluateScore();if(b.isFinished(a,c))return[null,c];for(var c=[null,99999],h=0;h<this.columns;h++){var g=b.getBoardCopy();if(g.canPlace(h)){g=this.maximize(g,a-1,d,f);if(null===c[0]||g[1]<c[1])c[0]=h,f=$jscomp.makeIterator(g),f.next(),c[1]=f.next().value,f=$jscomp.makeIterator(g),f.next(),f=f.next().value;if(d>=f)break}}return c};h.switchRound=function(b){return 0==
b?1:0};h.prototype.checkGameOver=function(){var b=this,a=this.board.evaluateScore();a==-this.score?(d=!0,window.modal("You Win!",2E3),document.getElementById("uiBlocker").style.display="none",window.sleep(1E3).then(function(){return b.winnersColorChange()})):a==this.score?(d=!0,window.modal("You Lose!",2E3),document.getElementById("uiBlocker").style.display="none",window.sleep(1E3).then(function(){return b.winnersColorChange()})):this.board.isFull()&&(d=!0,document.getElementById("uiBlocker").style.display=
"none",window.modal("Draw!",2E3))};h.prototype.winnersColorChange=function(){document.getElementById("gameBoard").className="finished";for(var b=0;b<this.winners.length;b++){var a=document.getElementById("gameBoard").rows[this.winners[b][0]].cells[this.winners[b][1]].className;document.getElementById("gameBoard").rows[this.winners[b][0]].cells[this.winners[b][1]].className=a+" win"}};var p=function(){document.getElementById("difficulty").disabled=!0;window.Game=new h(Array.from(document.getElementById("difficulty").options).find(function(b){return b.selected}).value)};
(function(){document.getElementById("start").addEventListener("click",p);for(var b=0;7>b;b++){var a=document.createElement("div");a.id="fc"+b;a.classList.add("floatingCircle");document.getElementById("floatingCircles").appendChild(a)}for(b=0;6>b;b++){a=document.createElement("tr");document.getElementById("gameBoard").appendChild(a);for(var d=0;7>d;d++){var f=document.createElement("td");f.className="empty";f.id="td"+b+d;a.appendChild(f)}}})()})();
