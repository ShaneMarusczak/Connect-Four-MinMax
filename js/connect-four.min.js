var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,e,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[e]=d.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var e=0;return $jscomp.iteratorPrototype(function(){return e<b.length?{done:!1,value:b[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=b[Symbol.iterator];return e?e.call(b):$jscomp.arrayIterator(b)};
$jscomp.polyfill=function(b,e,d,h){if(e){d=$jscomp.global;b=b.split(".");for(h=0;h<b.length-1;h++){var p=b[h];p in d||(d[p]={});d=d[p]}b=b[b.length-1];h=d[b];e=e(h);e!=h&&null!=e&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.from",function(b){return b?b:function(b,d,h){$jscomp.initSymbolIterator();d=null!=d?d:function(b){return b};var e=[],n=b[Symbol.iterator];if("function"==typeof n)for(b=n.call(b);!(n=b.next()).done;)e.push(d.call(h,n.value));else for(var n=b.length,m=0;m<n;m++)e.push(d.call(h,b[m]));return e}},"es6-impl","es3");$jscomp.findInternal=function(b,e,d){b instanceof String&&(b=String(b));for(var h=b.length,p=0;p<h;p++){var n=b[p];if(e.call(d,n,p,b))return{i:p,v:n}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,d){return $jscomp.findInternal(this,b,d).v}},"es6-impl","es3");
(function(){function b(a){if(!h&&!n){a=Number(a.target.id.substring(3));document.getElementById("fc"+a).classList.add("bounce");for(var c=5;0<=c;c--)if(document.getElementById("td"+c+a).classList.contains("empty")){document.getElementById("td"+c+a).classList.add("glow");break}}}function e(a){a=Number(a.target.id.substring(3));document.getElementById("fc"+a).classList.remove("bounce");for(var c=5;0<=c;c--)if(document.getElementById("td"+c+a).classList.contains("empty")){document.getElementById("td"+
c+a).classList.remove("glow");break}}var d=[3,2,4,1,5,6,0],h=!1,p=!1,n=!1,m=function(a,c,b){this.game=a;this.gameBoardArray=c;this.player=b};m.prototype.isFinished=function(a,c){return 0===a||c===this.game.score||c===-this.game.score||this.isFull()?!0:!1};m.prototype.columnIsFull=function(a){for(var c=this.game.rows-1;0<=c;c--)if(null===this.gameBoardArray[c][a])return!1;return!0};m.prototype.placeInColumnForQuickMove=function(a,c){for(var b=this.game.rows-1;0<=b;b--)if(null===this.gameBoardArray[b][a]){this.gameBoardArray[b][a]=
c;break}};m.prototype.canPlace=function(a){if(null===this.gameBoardArray[0][a]&&0<=a&&a<this.game.columns){for(var c=this.game.rows-1;0<=c;c--)if(null===this.gameBoardArray[c][a]){this.gameBoardArray[c][a]=this.player;break}this.player=0===this.player?1:0;return!0}return!1};m.prototype.scoreBoard=function(a,c,b,l){var f=0,q=0;this.game.winningArrayHuman=[];this.game.winningArrayCpu=[];for(var g=0;4>g;g++)0===this.gameBoardArray[a][c]?(this.game.winningArrayHuman.push([a,c]),f++):1===this.gameBoardArray[a][c]&&
(this.game.winningArrayCpu.push([a,c]),q++),a+=b,c+=l;return 4===f?(this.game.winners=this.game.winningArrayHuman,-this.game.score):4===q?(this.game.winners=this.game.winningArrayCpu,this.game.score):q};m.prototype.evaluateScore=function(){for(var a=0,c=0,b=0,l=0,f=0;f<this.game.rows-3;f++)for(var d=0;d<this.game.columns;d++){var g=this.scoreBoard(f,d,1,0);if(g===this.game.score)return this.game.score;if(g===-this.game.score)return-this.game.score;a+=g}for(f=0;f<this.game.rows;f++)for(d=0;d<this.game.columns-
3;d++){g=this.scoreBoard(f,d,0,1);if(g===this.game.score)return this.game.score;if(g===-this.game.score)return-this.game.score;c+=g}for(f=0;f<this.game.rows-3;f++)for(d=0;d<this.game.columns-3;d++){g=this.scoreBoard(f,d,1,1);if(g===this.game.score)return this.game.score;if(g===-this.game.score)return-this.game.score;b+=g}for(f=3;f<this.game.rows;f++)for(d=0;d<=this.game.columns-4;d++){g=this.scoreBoard(f,d,-1,1);if(g===this.game.score)return this.game.score;if(g===-this.game.score)return-this.game.score;
l+=g}return c+a+b+l};m.prototype.isFull=function(){for(var a=0;a<this.game.columns;a++)if(null===this.gameBoardArray[0][a])return!1;return!0};m.prototype.getBoardCopy=function(){for(var a=[],c=0;c<this.gameBoardArray.length;c++)a.push(this.gameBoardArray[c].slice());return new m(this.game,a,this.player)};var k=function(a){this.rows=6;this.columns=7;this.depth=a;this.score=1E5;this.round=0;this.winners=[];this.turnsTaken=0;this.init()};k.prototype.init=function(){for(var a=this,c=Array(6),d=0;d<c.length;d++){c[d]=
Array(7);for(var l=0;l<c[d].length;l++)c[d][l]=null}this.board=new m(this,c,0);Array.from(document.getElementById("gameBoard").getElementsByTagName("td")).forEach(function(c){c.addEventListener("click",function(c){a.move(c)},!1);c.addEventListener("mouseover",b);c.addEventListener("mouseleave",e)})};k.prototype.move=function(a){var c=this;h||(this.turnsTaken++,document.getElementById("uiBlocker").classList.add("block"),a=a.target||window.event.srcElement,0===this.round&&this.playCoin(a.cellIndex),
document.getElementById("fc"+a.cellIndex).classList.remove("bounce"),window.sleep(700).then(function(){1===c.round&&c.generateComputerDecision()}))};k.animateDrop=function(a){a=void 0===a?{}:a;var c=a.inputRow,b=a.inputCol,d=a.moveTurn,f=void 0===a.currentRow?0:a.currentRow;f===c?(h||d||(window.sleep(50).then(function(){window.modalOpen("Thinking...")}),document.getElementsByTagName("html")[0].classList.add("progressCursor"),r("yellow")),d&&(document.getElementById("uiBlocker").classList.remove("block"),
r("red"),n=!1),document.getElementById("td"+f+b).className=d?"coin cpu-coin":"coin human-coin"):(n=!0,document.getElementById("td"+f+b).classList.add("coin"),document.getElementById("td"+f+b).classList.add(d?"cpu-coin":"human-coin"),window.sleep(90).then(function(){document.getElementById("td"+f+b).classList.remove("coin");document.getElementById("td"+f+b).classList.remove(d?"cpu-coin":"human-coin")}),window.sleep(90).then(function(){k.animateDrop({currentRow:f+1,inputCol:b,inputRow:c,moveTurn:d})}))};
k.prototype.playCoin=function(a){if(!h){for(var c=this.rows-1;0<=c;c--)if(document.getElementById("gameBoard").rows[c].cells[a].classList.contains("empty")){1===this.round?k.animateDrop({inputCol:a,inputRow:c,moveTurn:!0}):k.animateDrop({inputCol:a,inputRow:c,moveTurn:!1});break}this.board.canPlace(a)?(this.round=0===this.round?1:0,this.checkGameOver()):(document.getElementById("uiBlocker").classList.remove("block"),window.modal("Invalid move!",1500))}};k.prototype.quickMove=function(){for(var a=
0;a<this.columns;a++){var c=this.board.getBoardCopy();if(!c.columnIsFull(a)&&(c.placeInColumnForQuickMove(a,1),1E5===c.evaluateScore()))return a}for(a=0;a<this.columns;a++)if(c=this.board.getBoardCopy(),!c.columnIsFull(a)&&(c.placeInColumnForQuickMove(a,0),-1E5===c.evaluateScore()))return a;return-1};k.prototype.generateComputerDecision=function(){var a=this;if(!h){var c=0,b=this.quickMove(),c=-1!==b?b:$jscomp.makeIterator(this.maximize(this.board,this.getDepth())).next().value;window.sleep(175).then(function(){window.modalClose();
window.sleep(75).then(function(){return a.playCoin(c)})})}};k.prototype.getDepth=function(){return 4>=Number(this.depth)?this.depth:5>this.turnsTaken?this.depth-2:this.depth};k.prototype.maximize=function(a,c,b,l){var f=a.evaluateScore();if(a.isFinished(c,f))return[null,f];for(var f=[null,-99999],e=$jscomp.makeIterator(d),g=e.next();!g.done;g=e.next()){var g=g.value,h=a.getBoardCopy();if(h.canPlace(g)){h=this.minimize(h,c-1,b,l);if(null===f[0]||h[1]>f[1])f[0]=g,b=$jscomp.makeIterator(h),b.next(),
f[1]=b.next().value,b=$jscomp.makeIterator(h),b.next(),b=b.next().value;if(b>=l)break}}return f};k.prototype.minimize=function(a,b,h,e){var c=a.evaluateScore();if(a.isFinished(b,c))return[null,c];for(var c=[null,99999],k=$jscomp.makeIterator(d),g=k.next();!g.done;g=k.next()){var g=g.value,l=a.getBoardCopy();if(l.canPlace(g)){l=this.maximize(l,b-1,h,e);if(null===c[0]||l[1]<c[1])c[0]=g,e=$jscomp.makeIterator(l),e.next(),c[1]=e.next().value,e=$jscomp.makeIterator(l),e.next(),e=e.next().value;if(h>=e)break}}return c};
k.prototype.checkGameOver=function(){var a=this.board.evaluateScore();a===-this.score?this.gameOverHelper("You Win!"):a===this.score?this.gameOverHelper("You Lose!"):this.board.isFull()&&(h=!0,window.modal("Draw!",2E3));document.getElementsByTagName("html")[0].classList.remove("progressCursor")};k.prototype.gameOverHelper=function(a){var c=this;document.getElementById("uiBlocker").classList.remove("block");h=!0;window.modal(a,2E3);window.sleep(1E3).then(function(){c.winnersColorChange()})};k.prototype.winnersColorChange=
function(){document.getElementById("gameBoard").className="finished";for(var a=0;a<this.winners.length;a++){var c=document.getElementById("gameBoard").rows[this.winners[a][0]].cells[this.winners[a][1]].className;document.getElementById("gameBoard").rows[this.winners[a][0]].cells[this.winners[a][1]].className=c+" win"}};var t=function(){p||(p=!0,document.getElementById("difficulty").disabled=!0,window.Game=new k(Array.from(document.getElementById("difficulty").options).find(function(a){return a.selected}).value))},
r=function(a){var c=document.querySelector("link[rel*='icon']")||document.createElement("link");c.type="image/x-icon";c.rel="shortcut icon";c.href="favicon"+a+".ico"};(function(){document.getElementById("start").addEventListener("click",t);for(var a=0;7>a;a++){var c=document.createElement("div");c.id="fc"+a;c.classList.add("floatingCircle");document.getElementById("floatingCircles").appendChild(c)}for(a=0;6>a;a++){c=document.createElement("tr");document.getElementById("gameBoard").appendChild(c);
for(var b=0;7>b;b++){var d=document.createElement("td");d.className="empty";d.id="td"+a+b;c.appendChild(d)}}})()})();
