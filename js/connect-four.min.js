var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,h,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[h]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var h=0;return $jscomp.iteratorPrototype(function(){return h<a.length?{done:!1,value:a[h++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var h=a[Symbol.iterator];return h?h.call(a):$jscomp.arrayIterator(a)};
$jscomp.polyfill=function(a,h,e,k){if(h){e=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var q=a[k];q in e||(e[q]={});e=e[q]}a=a[a.length-1];k=e[a];h=h(k);h!=k&&null!=h&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,e,k){$jscomp.initSymbolIterator();e=null!=e?e:function(a){return a};var h=[],p=a[Symbol.iterator];if("function"==typeof p)for(a=p.call(a);!(p=a.next()).done;)h.push(e.call(k,p.value));else for(var p=a.length,n=0;n<p;n++)h.push(e.call(k,a[n]));return h}},"es6-impl","es3");$jscomp.findInternal=function(a,h,e){a instanceof String&&(a=String(a));for(var k=a.length,q=0;q<k;q++){var p=a[q];if(h.call(e,p,q,a))return{i:q,v:p}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6-impl","es3");
(function(){function a(b){if(!k&&!p){b=Number(b.target.id.substring(3));document.getElementById("fc"+b).classList.add("bounce");for(var c=5;0<=c;c--)if(document.getElementById("td"+c+b).classList.contains("empty")){document.getElementById("td"+c+b).classList.add("glow");break}}}function h(b){b=Number(b.target.id.substring(3));document.getElementById("fc"+b).classList.remove("bounce");for(var c=5;0<=c;c--)if(document.getElementById("td"+c+b).classList.contains("empty")){document.getElementById("td"+
c+b).classList.remove("glow");break}}var e=[3,2,4,1,5,6,0],k=!1,q=!1,p=!1,n=function(b,c,a){this.game=b;this.gameBoardArray=c;this.player=a};n.prototype.isFinished=function(b,c){return 0===b||c===this.game.score||c===-this.game.score||this.isFull()?!0:!1};n.prototype.columnIsFull=function(b){for(var c=this.game.rows-1;0<=c;c--)if(null===this.gameBoardArray[c][b])return!1;return!0};n.prototype.placeInColumnForQuickMove=function(b,c){for(var a=this.game.rows-1;0<=a;a--)if(null===this.gameBoardArray[a][b]){this.gameBoardArray[a][b]=
c;break}};n.prototype.canPlace=function(b){if(null===this.gameBoardArray[0][b]&&0<=b&&b<this.game.columns){for(var c=this.game.rows-1;0<=c;c--)if(null===this.gameBoardArray[c][b]){this.gameBoardArray[c][b]=this.player;break}this.player=0===this.player?1:0;return!0}return!1};n.prototype.scoreBoard=function(b,c,a,d,m){var r=0,f=0;m&&(this.game.winningArrayHuman=[],this.game.winningArrayCpu=[]);for(var g=0;4>g;g++)0===this.gameBoardArray[b][c]?(m&&this.game.winningArrayHuman.push([b,c]),r++):1===this.gameBoardArray[b][c]&&
(m&&this.game.winningArrayCpu.push([b,c]),f++),b+=a,c+=d;return 4===r?(m&&(this.game.winners=this.game.winningArrayHuman),-this.game.score):4===f?(m&&(this.game.winners=this.game.winningArrayCpu),this.game.score):f};n.prototype.evaluateScore=function(b){for(var c=0,a=0,d=0,m=0,e=0;e<this.game.rows-3;e++)for(var f=0;f<this.game.columns;f++){var g=this.scoreBoard(e,f,1,0,b);if(g===this.game.score)return this.game.score;if(g===-this.game.score)return-this.game.score;c+=g}for(e=0;e<this.game.rows;e++)for(f=
0;f<this.game.columns-3;f++){g=this.scoreBoard(e,f,0,1,b);if(g===this.game.score)return this.game.score;if(g===-this.game.score)return-this.game.score;a+=g}for(e=0;e<this.game.rows-3;e++)for(f=0;f<this.game.columns-3;f++){g=this.scoreBoard(e,f,1,1,b);if(g===this.game.score)return this.game.score;if(g===-this.game.score)return-this.game.score;d+=g}for(e=3;e<this.game.rows;e++)for(f=0;f<=this.game.columns-4;f++){g=this.scoreBoard(e,f,-1,1,b);if(g===this.game.score)return this.game.score;if(g===-this.game.score)return-this.game.score;
m+=g}return a+c+d+m};n.prototype.isFull=function(){for(var b=0;b<this.game.columns;b++)if(null===this.gameBoardArray[0][b])return!1;return!0};n.prototype.getBoardCopy=function(){for(var b=[],c=0;c<this.gameBoardArray.length;c++)b.push(this.gameBoardArray[c].slice());return new n(this.game,b,this.player)};var l=function(b){this.rows=6;this.columns=7;this.depth=b;this.score=1E5;this.round=0;this.winners=[];this.turnsTaken=0;this.init()};l.prototype.init=function(){for(var b=this,c=Array(6),r=0;r<c.length;r++){c[r]=
Array(7);for(var d=0;d<c[r].length;d++)c[r][d]=null}this.board=new n(this,c,0);Array.from(document.getElementById("gameBoard").getElementsByTagName("td")).forEach(function(c){c.addEventListener("click",function(c){b.move(c)},!1);c.addEventListener("mouseover",a);c.addEventListener("mouseleave",h)})};l.prototype.move=function(b){var c=this;k||(this.turnsTaken++,document.getElementById("uiBlocker").classList.add("block"),b=b.target||window.event.srcElement,0===this.round&&this.playCoin(b.cellIndex),
document.getElementById("fc"+b.cellIndex).classList.remove("bounce"),window.sleep(700).then(function(){1===c.round&&c.generateComputerDecision()}))};l.animateDrop=function(b){b=void 0===b?{}:b;var c=b.inputRow,a=b.inputCol,d=b.moveTurn,e=void 0===b.currentRow?0:b.currentRow;e===c?(k||d||(window.sleep(50).then(function(){window.modalOpen("Thinking...")}),document.getElementsByTagName("html")[0].classList.add("progressCursor"),t("yellow")),d&&(document.getElementById("uiBlocker").classList.remove("block"),
t("red"),p=!1),document.getElementById("td"+e+a).className=d?"coin cpu-coin":"coin human-coin"):(p=!0,document.getElementById("td"+e+a).classList.add("coin"),document.getElementById("td"+e+a).classList.add(d?"cpu-coin":"human-coin"),window.sleep(90).then(function(){document.getElementById("td"+e+a).classList.remove("coin");document.getElementById("td"+e+a).classList.remove(d?"cpu-coin":"human-coin")}),window.sleep(90).then(function(){l.animateDrop({currentRow:e+1,inputCol:a,inputRow:c,moveTurn:d})}))};
l.prototype.playCoin=function(b){if(!k){for(var c=this.rows-1;0<=c;c--)if(document.getElementById("gameBoard").rows[c].cells[b].classList.contains("empty")){1===this.round?l.animateDrop({inputCol:b,inputRow:c,moveTurn:!0}):l.animateDrop({inputCol:b,inputRow:c,moveTurn:!1});break}this.board.canPlace(b)?(this.round=0===this.round?1:0,this.checkGameOver()):(document.getElementById("uiBlocker").classList.remove("block"),window.modal("Invalid move!",1500))}};l.prototype.quickMove=function(){for(var b=
0;b<this.columns;b++){var c=this.board.getBoardCopy();if(!c.columnIsFull(b)&&(c.placeInColumnForQuickMove(b,1),1E5===c.evaluateScore(!1)))return b}for(b=0;b<this.columns;b++)if(c=this.board.getBoardCopy(),!c.columnIsFull(b)&&(c.placeInColumnForQuickMove(b,0),-1E5===c.evaluateScore(!1)))return b;return-1};l.prototype.generateCompMoveInner=function(){for(var b,c=1;c<=this.getDepth();c++){var a=$jscomp.makeIterator(this.maximize(this.board,c)).next().value,d=[];b=a;d.push(a);0===a?(d.push(1),d.push(2),
d.push(3),d.push(4),d.push(5),d.push(6)):1===a?(d.push(0),d.push(2),d.push(3),d.push(4),d.push(5),d.push(6)):2===a?(d.push(1),d.push(3),d.push(0),d.push(4),d.push(5),d.push(6)):3===a?(d.push(2),d.push(4),d.push(1),d.push(5),d.push(0),d.push(6)):4===a?(d.push(3),d.push(5),d.push(2),d.push(6),d.push(1),d.push(0)):5===a?(d.push(6),d.push(4),d.push(3),d.push(2),d.push(1),d.push(0)):6===a&&(d.push(5),d.push(4),d.push(3),d.push(2),d.push(1),d.push(0));e=d}return b};l.prototype.generateComputerDecision=
function(){var b=this;if(!k){var c=0,a=this.quickMove(),c=-1!==a?a:this.generateCompMoveInner();window.sleep(175).then(function(){window.modalClose();window.sleep(75).then(function(){return b.playCoin(c)})})}};l.prototype.getDepth=function(){return 4>=Number(this.depth)?this.depth:5>this.turnsTaken?this.depth-2:this.depth};l.prototype.maximize=function(b,c,a,d){var m=b.evaluateScore(!1);if(b.isFinished(c,m))return[null,m];for(var m=[null,-99999],h=$jscomp.makeIterator(e),f=h.next();!f.done;f=h.next()){var f=
f.value,g=b.getBoardCopy();if(g.canPlace(f)){g=this.minimize(g,c-1,a,d);if(null===m[0]||g[1]>m[1])m[0]=f,a=$jscomp.makeIterator(g),a.next(),m[1]=a.next().value,a=$jscomp.makeIterator(g),a.next(),a=a.next().value;if(a>=d)break}}return m};l.prototype.minimize=function(b,a,h,d){var c=b.evaluateScore(!1);if(b.isFinished(a,c))return[null,c];for(var c=[null,99999],k=$jscomp.makeIterator(e),f=k.next();!f.done;f=k.next()){var f=f.value,g=b.getBoardCopy();if(g.canPlace(f)){g=this.maximize(g,a-1,h,d);if(null===
c[0]||g[1]<c[1])c[0]=f,d=$jscomp.makeIterator(g),d.next(),c[1]=d.next().value,d=$jscomp.makeIterator(g),d.next(),d=d.next().value;if(h>=d)break}}return c};l.prototype.checkGameOver=function(){var b=this.board.evaluateScore(!0);b===-this.score?this.gameOverHelper("You Win!"):b===this.score?this.gameOverHelper("You Lose!"):this.board.isFull()&&(k=!0,window.modal("Draw!",2E3));document.getElementsByTagName("html")[0].classList.remove("progressCursor")};l.prototype.gameOverHelper=function(b){var a=this;
document.getElementById("uiBlocker").classList.remove("block");k=!0;window.modal(b,2E3);window.sleep(1E3).then(function(){a.winnersColorChange()})};l.prototype.winnersColorChange=function(){document.getElementById("gameBoard").className="finished";for(var b=0;b<this.winners.length;b++){var a=document.getElementById("gameBoard").rows[this.winners[b][0]].cells[this.winners[b][1]].className;document.getElementById("gameBoard").rows[this.winners[b][0]].cells[this.winners[b][1]].className=a+" win"}};var u=
function(){q||(q=!0,document.getElementById("difficulty").disabled=!0,window.Game=new l(Array.from(document.getElementById("difficulty").options).find(function(b){return b.selected}).value))},t=function(b){var a=document.querySelector("link[rel*='icon']")||document.createElement("link");a.type="image/x-icon";a.rel="shortcut icon";a.href="favicon"+b+".ico"};(function(){document.getElementById("start").addEventListener("click",u);for(var b=0;7>b;b++){var a=document.createElement("div");a.id="fc"+b;
a.classList.add("floatingCircle");document.getElementById("floatingCircles").appendChild(a)}for(b=0;6>b;b++){a=document.createElement("tr");document.getElementById("gameBoard").appendChild(a);for(var e=0;7>e;e++){var d=document.createElement("td");d.className="empty";d.id="td"+b+e;a.appendChild(d)}}})()})();
